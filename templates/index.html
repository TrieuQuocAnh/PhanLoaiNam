<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üçÑ D·ª± ƒëo√°n n·∫•m</title>
  <style>
    :root { --bg:#0b1020; --panel:#121938; --text:#eaefff; --muted:#9aa3b2; --ok:#2ecc71; --bad:#e74c3c; }
    * { box-sizing: border-box; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    body { margin:0; min-height:100vh; background: radial-gradient(60% 60% at 50% 0%, #1f2b6b, #0b1020 70%); color: var(--text); display:flex; align-items:center; justify-content:center; padding: 24px; }
    .card { width: 100%; max-width: 720px; background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03)); border: 1px solid rgba(255,255,255,0.12); border-radius: 20px; padding: 24px; box-shadow: 0 20px 80px rgba(0,0,0,0.4); }
    h1 { margin: 0 0 8px; font-size: 28px; }
    .sub { color: var(--muted); margin-bottom: 24px; }
    form { display:grid; gap: 16px; grid-template-columns: 1fr; }
    .row { display:grid; gap: 12px; grid-template-columns: 1fr; }
    @media(min-width: 640px){ .row { grid-template-columns: 1fr 1fr 1fr; } }
    label { font-weight: 600; font-size: 14px; }
    select { width: 100%; padding: 10px 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.15); background: #0e1430; color: var(--text); }
    button { padding: 12px 16px; border-radius: 12px; background: #4c6fff; color: white; border: none; font-weight: 700; cursor: pointer; }
    button:hover { filter: brightness(1.05); }
    .result { margin-top: 16px; padding: 12px 14px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.18); display:flex; align-items:center; gap:10px; }
    .tag { font-weight: 700; padding: 3px 8px; border-radius: 999px; }
    .ok { background: #1e4630; color: #adf0c0; border: 1px solid #2ecc71; }
    .bad { background: #4a1820; color: #ffc1c7; border: 1px solid #e74c3c; }
    .unknown { background: #353a50; color: #eaefff; border: 1px solid #8ea0d3; }
    .warn { color: #ffd166; font-size: 14px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>üçÑ D·ª± ƒëo√°n n·∫•m ƒÉn ƒë∆∞·ª£c hay kh√¥ng</h1>
    <div class="sub">Ch·ªçn c√°c thu·ªôc t√≠nh b√™n d∆∞·ªõi r·ªìi b·∫•m <b>D·ª± ƒëo√°n</b>. M√¥ h√¨nh quy·∫øt ƒë·ªãnh c√¢y s·∫Ω tr·∫£ v·ªÅ <i>Edible</i> ho·∫∑c <i>Poisonous</i>.</div>
    {% if not model_ready %}
      <div class="result unknown"><span class="tag unknown">‚ö†Ô∏è Thi·∫øu m√¥ h√¨nh</span> Kh√¥ng t√¨m th·∫•y file <code>{{ model_path }}</code>. H√£y ƒë·∫∑t <code>mushroom_model.pkl</code> c·∫°nh file app v√† t·∫£i l·∫°i trang.</div>
    {% endif %}

    <form method="post">
      <div class="row">
        <div>
          <label for="odor">M√πi (odor)</label>
          <select id="odor" name="odor" required>
            <option value="">-- Ch·ªçn m√πi --</option>
            {% for code, label in odor_values.items() %}
              <option value="{{ code }}" {% if form_vals.odor==code %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
          </select>
        </div>
        <div>
          <label for="cap">M√†u m≈© n·∫•m (cap-color)</label>
          <select id="cap" name="cap-color" required>
            <option value="">-- Ch·ªçn m√†u m≈© --</option>
            {% for code, label in cap_color_values.items() %}
              <option value="{{ code }}" {% if form_vals.cap==code or form_vals['cap-color']==code %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
          </select>
        </div>
        <div>
          <label for="gill">M√†u phi·∫øn n·∫•m (gill-color)</label>
          <select id="gill" name="gill-color" required>
            <option value="">-- Ch·ªçn m√†u phi·∫øn --</option>
            {% for code, label in gill_color_values.items() %}
              <option value="{{ code }}" {% if form_vals.gill==code or form_vals['gill-color']==code %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
      <button type="submit">üîÆ D·ª± ƒëo√°n</button>
    </form>

    {% if result %}
      <div class="result {{ result.cls }}">
        <span class="tag {{ result.cls }}">{{ result.emoji }} {{ result.title }}</span>
        <div>{{ result.msg }}</div>
      </div>
      {% if result.cls == 'bad' %}
        <div class="warn">*L∆∞u √Ω*: K·∫øt qu·∫£ ch·ªâ mang t√≠nh tham kh·∫£o h·ªçc t·∫≠p, kh√¥ng d√πng ƒë·ªÉ ƒÉn th·ª≠ n·∫•m ngo√†i th·ª±c t·∫ø.</div>
      {% endif %}
    {% endif %}
  </div>
</body>
</html>
